---
name: Gallery UI Components
status: open
created: 2025-10-23T05:35:03Z
updated: 2025-10-23T05:35:03Z
github: [Will be updated when synced to GitHub]
depends_on: [002, 003]
parallel: true
conflicts_with: [006]
---

# Task: Gallery UI Components

## Description
Build the core gallery UI components including ModelCard for displaying model previews, GalleryGrid for responsive layout with pagination, and the main gallery index page. Implement image optimization, responsive design, and loading states for optimal user experience.

## Acceptance Criteria
- [ ] `ModelCard.vue` component displays model thumbnail, name, metadata
- [ ] `GalleryGrid.vue` component with responsive grid layout
- [ ] Pagination component with next/prev navigation
- [ ] `/pages/index.vue` gallery page implemented
- [ ] Responsive design: 1 column mobile, 2 tablet, 3-4 desktop
- [ ] Image optimization with @nuxt/image (WebP, lazy loading)
- [ ] Loading skeleton screens during data fetch
- [ ] Empty state when no models found
- [ ] Hover effects and smooth transitions
- [ ] Grid/list view toggle button (UI only, list view in later task)

## Technical Details

### Implementation Approach

1. **Create ModelCard Component** (`/components/ModelCard.vue`):
   ```vue
   <template>
     <div
       class="model-card group relative rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300 bg-white dark:bg-gray-800"
     >
       <!-- Thumbnail -->
       <NuxtLink :to="`/models/${model.slug}`" class="block aspect-square relative">
         <NuxtImg
           :src="model.thumbnail"
           :alt="model.name"
           class="w-full h-full object-cover"
           loading="lazy"
           format="webp"
           sizes="sm:100vw md:50vw lg:33vw"
         />

         <!-- Overlay on hover -->
         <div
           class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-opacity duration-300 flex items-center justify-center"
         >
           <button
             class="opacity-0 group-hover:opacity-100 transition-opacity px-4 py-2 bg-white rounded-md text-sm font-semibold"
           >
             View 3D Preview
           </button>
         </div>

         <!-- Category badge -->
         <div class="absolute top-2 left-2">
           <span class="px-2 py-1 bg-blue-500 text-white text-xs rounded-md">
             {{ getCategoryName(model.category) }}
           </span>
         </div>
       </NuxtLink>

       <!-- Model info -->
       <div class="p-4">
         <h3 class="text-lg font-semibold mb-1 truncate">
           {{ model.name }}
         </h3>

         <p class="text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2">
           {{ model.description }}
         </p>

         <!-- Tags -->
         <div class="flex flex-wrap gap-1 mb-3">
           <span
             v-for="tag in model.tags.slice(0, 3)"
             :key="tag"
             class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded"
           >
             #{{ tag }}
           </span>
         </div>

         <!-- Stats -->
         <div class="flex items-center justify-between text-sm text-gray-500">
           <div class="flex items-center gap-1">
             <IconDownload class="w-4 h-4" />
             <span>{{ model.downloads }}</span>
           </div>

           <div class="flex items-center gap-1">
             <IconCube class="w-4 h-4" />
             <span>{{ formatPolycount(model.polycount) }}</span>
           </div>

           <div>{{ model.formats[0].type }}</div>
         </div>
       </div>
     </div>
   </template>

   <script setup lang="ts">
   import type { Model } from '~/schemas/model.schema'

   const props = defineProps<{
     model: Model
   }>()

   const { getCategoryName } = useCategories()

   const formatPolycount = (count?: number) => {
     if (!count) return 'N/A'
     if (count >= 1000) return `${(count / 1000).toFixed(1)}K`
     return count.toString()
   }
   </script>
   ```

2. **Create GalleryGrid Component** (`/components/GalleryGrid.vue`):
   ```vue
   <template>
     <div class="gallery-grid-container">
       <!-- Loading state -->
       <div v-if="loading" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
         <SkeletonCard v-for="i in 12" :key="i" />
       </div>

       <!-- Empty state -->
       <div v-else-if="!loading && models.length === 0" class="text-center py-12">
         <IconEmptyBox class="w-16 h-16 mx-auto mb-4 text-gray-400" />
         <h3 class="text-xl font-semibold mb-2">No models found</h3>
         <p class="text-gray-600 mb-4">Try adjusting your filters or search terms</p>
         <button
           @click="$emit('clearFilters')"
           class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"
         >
           Clear Filters
         </button>
       </div>

       <!-- Model grid -->
       <div
         v-else
         class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
       >
         <ModelCard v-for="model in models" :key="model.id" :model="model" />
       </div>

       <!-- Pagination -->
       <div v-if="!loading && totalPages > 1" class="mt-8 flex justify-center items-center gap-4">
         <button
           @click="$emit('prevPage')"
           :disabled="currentPage === 1"
           class="px-4 py-2 rounded-md border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
         >
           Previous
         </button>

         <span class="text-sm text-gray-600">
           Page {{ currentPage }} of {{ totalPages }}
         </span>

         <button
           @click="$emit('nextPage')"
           :disabled="currentPage === totalPages"
           class="px-4 py-2 rounded-md border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
         >
           Next
         </button>
       </div>
     </div>
   </template>

   <script setup lang="ts">
   import type { Model } from '~/schemas/model.schema'

   defineProps<{
     models: Model[]
     loading: boolean
     currentPage: number
     totalPages: number
   }>()

   defineEmits<{
     prevPage: []
     nextPage: []
     clearFilters: []
   }>()
   </script>
   ```

3. **Create Skeleton Loader** (`/components/SkeletonCard.vue`):
   ```vue
   <template>
     <div class="skeleton-card rounded-lg overflow-hidden shadow-md bg-white dark:bg-gray-800 animate-pulse">
       <div class="aspect-square bg-gray-300 dark:bg-gray-700"></div>
       <div class="p-4">
         <div class="h-5 bg-gray-300 dark:bg-gray-700 rounded mb-2"></div>
         <div class="h-4 bg-gray-200 dark:bg-gray-600 rounded mb-2"></div>
         <div class="h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4"></div>
       </div>
     </div>
   </template>
   ```

4. **Create Gallery Index Page** (`/pages/index.vue`):
   ```vue
   <template>
     <div class="container mx-auto px-4 py-8">
       <!-- Header -->
       <div class="mb-8">
         <h1 class="text-4xl font-bold mb-2">3D Model Gallery</h1>
         <p class="text-gray-600">
           Browse and download high-quality 3D models for your projects
         </p>
       </div>

       <!-- Filters bar -->
       <div class="mb-6 flex items-center justify-between">
         <div class="flex items-center gap-4">
           <!-- Category filter -->
           <select
             v-model="selectedCategory"
             class="px-4 py-2 border rounded-md"
           >
             <option value="">All Categories</option>
             <option v-for="cat in categories" :key="cat.id" :value="cat.id">
               {{ cat.name }}
             </option>
           </select>

           <!-- Sort options -->
           <select v-model="sortBy" class="px-4 py-2 border rounded-md">
             <option value="date">Newest First</option>
             <option value="name">Name A-Z</option>
             <option value="downloads">Most Downloaded</option>
           </select>
         </div>

         <!-- View toggle (placeholder for now) -->
         <div class="flex gap-2">
           <button class="p-2 border rounded-md bg-blue-500 text-white">
             <IconGrid class="w-5 h-5" />
           </button>
           <button class="p-2 border rounded-md">
             <IconList class="w-5 h-5" />
           </button>
         </div>
       </div>

       <!-- Gallery grid -->
       <GalleryGrid
         :models="displayedModels"
         :loading="loading"
         :current-page="currentPage"
         :total-pages="totalPages"
         @prev-page="prevPage"
         @next-page="nextPage"
         @clear-filters="clearFilters"
       />
     </div>
   </template>

   <script setup lang="ts">
   const { models, loading } = useModels()
   const { categories } = useCategories()

   // Filters
   const selectedCategory = ref('')
   const sortBy = ref('date')
   const currentPage = ref(1)
   const itemsPerPage = 24

   // Computed filtered and paginated models
   const filteredModels = computed(() => {
     let result = models.value

     if (selectedCategory.value) {
       result = result.filter(m => m.category === selectedCategory.value)
     }

     // Sort
     result = [...result].sort((a, b) => {
       switch (sortBy.value) {
         case 'date':
           return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
         case 'name':
           return a.name.localeCompare(b.name)
         case 'downloads':
           return b.downloads - a.downloads
         default:
           return 0
       }
     })

     return result
   })

   const totalPages = computed(() =>
     Math.ceil(filteredModels.value.length / itemsPerPage)
   )

   const displayedModels = computed(() => {
     const start = (currentPage.value - 1) * itemsPerPage
     return filteredModels.value.slice(start, start + itemsPerPage)
   })

   // Pagination
   const nextPage = () => {
     if (currentPage.value < totalPages.value) {
       currentPage.value++
       window.scrollTo({ top: 0, behavior: 'smooth' })
     }
   }

   const prevPage = () => {
     if (currentPage.value > 1) {
       currentPage.value--
       window.scrollTo({ top: 0, behavior: 'smooth' })
     }
   }

   const clearFilters = () => {
     selectedCategory.value = ''
     sortBy.value = 'date'
     currentPage.value = 1
   }

   // SEO
   useSeoMeta({
     title: '3D Model Gallery - Browse Free 3D Models',
     description: 'Explore our collection of high-quality 3D models. Download free GLB, GLTF models for games, animations, and visualizations.',
     ogTitle: '3D Model Gallery',
     ogDescription: 'Browse and download free 3D models',
     ogImage: '/og-image.jpg'
   })
   </script>
   ```

### Key Considerations
- **Performance**: Image lazy loading, WebP format
- **Responsive**: Mobile-first design with Tailwind utilities
- **Accessibility**: Proper ARIA labels, keyboard navigation
- **Loading States**: Skeleton screens prevent layout shift
- **SEO**: Semantic HTML, proper meta tags

### Code Locations/Files Affected
- New files:
  - `/components/ModelCard.vue`
  - `/components/GalleryGrid.vue`
  - `/components/SkeletonCard.vue`
  - `/pages/index.vue`

## Dependencies
- [ ] Task 002 completed (data schemas)
- [ ] Task 003 completed (composables for data access)
- [ ] Icon components (can use Heroicons or similar)

## Effort Estimate
- **Size**: M (Medium)
- **Hours**: 12 hours
- **Parallel**: true (can work alongside 3D viewer task)
- **Complexity**: Medium
- **Conflicts with**: Task 006 (both modify pages/components)

### Time Breakdown
- ModelCard component: 3 hours
- GalleryGrid component: 3 hours
- Skeleton loaders: 1 hour
- Index page with filters: 3 hours
- Responsive design polish: 2 hours

## Definition of Done
- [ ] Code implemented: All components complete
- [ ] Tests passing: Visual testing on multiple devices
- [ ] Documentation updated: Component props documented
- [ ] Code reviewed: Accessibility and performance verified
- [ ] Ready for use: Gallery displays correctly
- [ ] Verified: Responsive on mobile, tablet, desktop
- [ ] Verified: Images load as WebP with lazy loading
- [ ] Verified: Pagination works correctly
- [ ] Verified: Filters update display in real-time
